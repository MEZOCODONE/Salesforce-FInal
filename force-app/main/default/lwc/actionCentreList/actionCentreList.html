<template>
    <c-custom-toast-cmp></c-custom-toast-cmp>

    <div class="list-container">
        <div class="toolbar">
            <lightning-combobox
                name="viewType"
                label="Explore"
                value={viewType}
                options={typeOptions}
                onchange={handleTypeChange}>
            </lightning-combobox>

            <template if:true={hasProcedures}>
                <lightning-combobox name="currency"
                                    label="Currency"
                                    value={selectedCurrency}
                                    options={currencyOptions}
                                    onchange={handleCurrencyChange}>
                </lightning-combobox>
                    <a onclick={handleExportClick}
                       class="slds-button slds-button_brand export-btn"
                       target="_blank">
                       Export as PDF
                    </a>
            </template>
        </div>

        <!-- CENTRES -->
        <template if:true={hasCentres}>
            <div class="grid">
                <template for:each={centres} for:item="centre">
                    <div key={centre.Id} class="card">
                        <a href={centre.url} target="_blank" class="card-title">{centre.Name}</a>
                        <p class="card-detail">üìç {centre.Address__c.country}, {centre.Address__c.city}, {centre.Address__c.street}, {centre.Address__c.postalCode}</p>
                        <p class="card-detail">üïí {centre.Working_Hours__c}</p>
                    </div>
                </template>
            </div>
        </template>

        <!-- PROCEDURES -->
        <template if:true={hasProcedures}>
            <div class="grid">
                <template for:each={procedures} for:item="procedure">
                    <div key={procedure.Id} class="card">
                        <a href={procedure.url} target="_blank" class="card-title">{procedure.name}</a>
                        <p class="card-price">{procedure.convertedPrice} {selectedCurrency}</p>
                    </div>
                </template>
            </div>
        </template>

        <template if:true={error}>
            <p class="error-text">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö</p>
        </template>
    </div>
</template>
